"use client";
import React, { useState } from "react";
const Kontakt = () => {
  const [formData, setFormData] = useState({
    name: "",
    email: "",
    phone_number: "",
    new_contact: "",
    message: ""
  });

  const [success, setSuccess] = useState(false); 
  const [errorMessage, setErrorMessage] = useState("");
  const [loading, setLoading] = useState(false); 

  const handleChange = (e) => {
    setFormData({
      ...formData,
      [e.target.name]: e.target.value,
    });
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setSuccess(false); 
    setErrorMessage("");
    setLoading(true); 

    const endpoint = process.env.NEXT_PUBLIC_SENDER_MAIL || 'https://formspree.io/f/mqaekbvo';

    try {
      const response = await fetch(endpoint, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(formData),
      });

      const result = await response.json();
      console.log('result', result)
      if (response.ok) {
        setSuccess(true); 
        setFormData({
          name: "",
          email: "",
          phone_number: "",
          new_contact: "",
          message: ""
        });
      } else {
        setErrorMessage(`Nachricht konnte nicht gesendet werden.: ${result.message}`);
      }
    } catch (error) {
      setErrorMessage("Ein Fehler ist aufgetreten. Bitte versuchen Sie es sp√§ter erneut.");
    } finally {
      setLoading(false); 
    }
  };

  return (
<section className="bg-white py-24 lg:py-28" id="contact">
      <div className="container">
        <div className="bg-secondary p-5 sm:p-12 lg:py-[70px] lg:px-[98px] text-white flex flex-col lg:flex-row justify-between gap-10 relative z-10 -mb-[100px]">
          <div className="w-full xl:w-5/12">
            <div>
              <h2 className="text-h3 mb-2">Kontakt aufnehmen</h2>
              <hr className="w-10 border-t-2 border-primary" />
            </div>
            <div className="space-y-4 mt-7 mb-6">
              <p>
                Wir freuen uns auf Ihre Fragen und vereinbaren gerne einen
                Termin mit Ihnen zusammen -
              </p>
            </div>
            <ul className="space-y-4 sm:space-y-5">
              <li>
                <a
                  aria-label=""
                  href="tel:+4971149050391"
                  className="flex gap-2"
                >
                  <span className="pt-[5px]">
                    <svg
                      width="17"
                      height="17"
                      viewBox="0 0 17 17"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M15.9688 12.248L15.25 15.4043C15.1042 15.8835 14.7812 16.1335 14.2812 16.1543C11.6354 16.1335 9.23958 15.4772 7.09375 14.1855C4.94792 12.9147 3.23958 11.2064 1.96875 9.06055C0.677083 6.91471 0.0208333 4.51888 0 1.87305C0.0208333 1.37305 0.270833 1.05013 0.75 0.904297L3.90625 0.185547C4.40625 0.102214 4.78125 0.289714 5.03125 0.748047L6.46875 4.12305C6.63542 4.58138 6.54167 4.9668 6.1875 5.2793L4.53125 6.62305C5.05208 7.70638 5.73958 8.67513 6.59375 9.5293C7.44792 10.3835 8.41667 11.0814 9.5 11.623L10.875 9.93555C11.1875 9.58138 11.5729 9.48763 12.0312 9.6543L15.4062 11.0918C15.8438 11.3626 16.0312 11.748 15.9688 12.248Z"
                        fill="#4E2B59"
                      />
                    </svg>
                  </span>
                  <span>+ 49 711 - 490 50 391</span>
                </a>
              </li>
              <li>
                <a
                  aria-label=""
                  href="tel:+497114905025"
                  className="flex gap-2"
                >
                  <span className="pt-[5px]">
                    <svg
                      width="15"
                      height="25"
                      viewBox="0 0 15 25"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <g clipPath="url(#clip0_56_157)">
                        <path
                          d="M1.86947 20.2865C1.37366 20.2865 0.898151 20.0895 0.547556 19.739C0.196962 19.3884 0 18.9128 0 18.417V10.5261C0 10.0303 0.196962 9.55476 0.547556 9.20417C0.898151 8.85357 1.37366 8.65661 1.86947 8.65661C2.36529 8.65661 2.8408 8.85357 3.19139 9.20417C3.54199 9.55476 3.73895 10.0303 3.73895 10.5261V18.4183C3.73895 18.9141 3.54199 19.3896 3.19139 19.7402C2.8408 20.0908 2.36529 20.2865 1.86947 20.2865ZM14.4265 9.89072H14.0274V7.16609L13.6029 6.74167L10.4413 3.57998L10.0168 3.1543H2.63368C2.47466 3.15497 2.32237 3.21861 2.21016 3.33129C2.09795 3.44398 2.03495 3.59653 2.03495 3.75556V7.46167C2.38933 7.48016 2.73774 7.56053 3.06442 7.69914C3.19182 7.75313 3.31547 7.81558 3.43453 7.88609V4.55514H8.93179V7.43009C8.93246 7.64094 9.01651 7.84296 9.16561 7.99206C9.3147 8.14115 9.51673 8.22521 9.72758 8.22588H12.6278V9.89198H4.87326C4.91693 10.1001 4.93894 10.3122 4.93895 10.5248V18.417C4.93931 19.0812 4.72387 19.7276 4.32505 20.2587H14.4265C14.7976 20.2577 15.1532 20.1098 15.4155 19.8472C15.6778 19.5847 15.8254 19.229 15.8261 18.8579V11.2916C15.8248 10.9208 15.6769 10.5656 15.4147 10.3034C15.1525 10.0412 14.7973 9.89205 14.4265 9.89072ZM7.61684 13.732C7.53805 13.7321 7.46 13.7168 7.38714 13.6868C7.31428 13.6568 7.24804 13.6127 7.19221 13.5571C7.13638 13.5015 7.09204 13.4355 7.06174 13.3628C7.03143 13.29 7.01575 13.212 7.01558 13.1332C7.01541 13.0545 7.03077 12.9764 7.06077 12.9035C7.09077 12.8307 7.13482 12.7644 7.19042 12.7086C7.24602 12.6528 7.31207 12.6084 7.3848 12.5781C7.45753 12.5478 7.53552 12.5321 7.61432 12.532H7.61684C7.77597 12.532 7.92858 12.5952 8.04111 12.7077C8.15363 12.8202 8.21684 12.9729 8.21684 13.132C8.21684 13.2911 8.15363 13.4437 8.04111 13.5562C7.92858 13.6688 7.77597 13.732 7.61684 13.732ZM7.61684 15.681C7.45771 15.6814 7.30497 15.6185 7.19221 15.5062C7.07945 15.3939 7.01591 15.2414 7.01558 15.0823C7.01524 14.9232 7.07814 14.7704 7.19042 14.6577C7.30271 14.5449 7.45519 14.4814 7.61432 14.481H7.61684C7.77597 14.481 7.92858 14.5442 8.04111 14.6568C8.15363 14.7693 8.21684 14.9219 8.21684 15.081C8.21684 15.2402 8.15363 15.3928 8.04111 15.5053C7.92858 15.6178 7.77597 15.681 7.61684 15.681ZM7.61684 17.6301C7.53805 17.6303 7.46 17.6149 7.38714 17.5849C7.31428 17.5549 7.24804 17.5108 7.19221 17.4552C7.13638 17.3996 7.09204 17.3336 7.06174 17.2609C7.03143 17.1881 7.01575 17.1101 7.01558 17.0313C7.01541 16.9526 7.03077 16.8745 7.06077 16.8016C7.09077 16.7288 7.13482 16.6625 7.19042 16.6067C7.24602 16.5509 7.31207 16.5065 7.3848 16.4762C7.45753 16.4459 7.53552 16.4303 7.61432 16.4301H7.61684C7.77597 16.4301 7.92858 16.4933 8.04111 16.6058C8.15363 16.7183 8.21684 16.871 8.21684 17.0301C8.21684 17.1892 8.15363 17.3418 8.04111 17.4543C7.92858 17.5669 7.77597 17.6301 7.61684 17.6301ZM10.0421 13.732H10.0396C9.88045 13.732 9.72784 13.6688 9.61532 13.5562C9.50279 13.4437 9.43958 13.2911 9.43958 13.132C9.43958 12.9729 9.50279 12.8202 9.61532 12.7077C9.72784 12.5952 9.88045 12.532 10.0396 12.532H10.0434C10.2025 12.532 10.3551 12.5952 10.4676 12.7077C10.5802 12.8202 10.6434 12.9729 10.6434 13.132C10.6434 13.2911 10.5802 13.4437 10.4676 13.5562C10.3551 13.6688 10.2012 13.732 10.0421 13.732ZM10.0421 15.681H10.0396C9.88045 15.681 9.72784 15.6178 9.61532 15.5053C9.50279 15.3928 9.43958 15.2402 9.43958 15.081C9.43958 14.9219 9.50279 14.7693 9.61532 14.6568C9.72784 14.5442 9.88045 14.481 10.0396 14.481H10.0434C10.2025 14.481 10.3551 14.5442 10.4676 14.6568C10.5802 14.7693 10.6434 14.9219 10.6434 15.081C10.6434 15.2402 10.5802 15.3928 10.4676 15.5053C10.3551 15.6178 10.2012 15.681 10.0421 15.681ZM10.0421 17.6301H10.0396C9.88045 17.6301 9.72784 17.5669 9.61532 17.4543C9.50279 17.3418 9.43958 17.1892 9.43958 17.0301C9.43958 16.871 9.50279 16.7183 9.61532 16.6058C9.72784 16.4933 9.88045 16.4301 10.0396 16.4301H10.0434C10.2025 16.4301 10.3551 16.4933 10.4676 16.6058C10.5802 16.7183 10.6434 16.871 10.6434 17.0301C10.6434 17.1892 10.5802 17.3418 10.4676 17.4543C10.3551 17.5669 10.2012 17.6301 10.0421 17.6301ZM12.4674 13.732C12.3082 13.7321 12.1556 13.6691 12.0429 13.5567C11.9303 13.4443 11.8669 13.2917 11.8667 13.1326C11.8666 12.9735 11.9296 12.8208 12.042 12.7082C12.1544 12.5955 12.307 12.5321 12.4661 12.532C12.5449 12.532 12.6242 12.5475 12.697 12.5777C12.7698 12.6078 12.8359 12.652 12.8916 12.7077C12.9473 12.7634 12.9915 12.8296 13.0217 12.9024C13.0519 12.9752 13.0674 13.0532 13.0674 13.132C13.0674 13.2108 13.0519 13.2888 13.0217 13.3616C12.9915 13.4344 12.9473 13.5005 12.8916 13.5562C12.8359 13.612 12.7698 13.6562 12.697 13.6863C12.6242 13.7165 12.5462 13.732 12.4674 13.732ZM12.4674 15.681C12.3082 15.6812 12.1556 15.6181 12.0429 15.5057C11.9303 15.3933 11.8669 15.2408 11.8667 15.0817C11.8666 14.9225 11.9296 14.7699 12.042 14.6572C12.1544 14.5446 12.307 14.4812 12.4661 14.481C12.5449 14.481 12.6242 14.4966 12.697 14.5267C12.7698 14.5569 12.8359 14.6011 12.8916 14.6568C12.9473 14.7125 12.9915 14.7786 13.0217 14.8514C13.0519 14.9242 13.0674 15.0022 13.0674 15.081C13.0674 15.1598 13.0519 15.2378 13.0217 15.3106C12.9915 15.3834 12.9473 15.4496 12.8916 15.5053C12.8359 15.561 12.7698 15.6052 12.697 15.6354C12.6242 15.6655 12.5462 15.681 12.4674 15.681ZM12.4674 17.6301C12.3082 17.6303 12.1556 17.5672 12.0429 17.4548C11.9303 17.3424 11.8669 17.1898 11.8667 17.0307C11.8666 16.8716 11.9296 16.7189 12.042 16.6063C12.1544 16.4936 12.307 16.4303 12.4661 16.4301C12.6252 16.4301 12.7791 16.4933 12.8916 16.6058C13.0042 16.7183 13.0674 16.871 13.0674 17.0301C13.0674 17.1892 13.0042 17.3418 12.8916 17.4543C12.7791 17.5669 12.6265 17.6301 12.4674 17.6301Z"
                          fill="#582C5F"
                        />
                      </g>
                      <defs>
                        <clipPath id="clip0_56_157">
                          <rect
                            width="15"
                            height="24"
                            fill="white"
                            transform="translate(0 0.154297)"
                          />
                        </clipPath>
                      </defs>
                    </svg>
                  </span>
                  <span>+ 49 711 - 490 50 25</span>
                </a>
              </li>
              <li>
                <a
                  aria-label=""
                  href="mailto:contact@eas-corporation.com"
                  className="flex gap-2"
                >
                  <span className="pt-[5px]">
                    <svg
                      width="16"
                      height="13"
                      viewBox="0 0 16 13"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M8 9.1543C8.52083 9.1543 9.01042 8.98763 9.46875 8.6543L16 3.56055V10.6543C15.9792 11.071 15.8333 11.4251 15.5625 11.7168C15.2708 11.9876 14.9167 12.1335 14.5 12.1543H1.5C1.08333 12.1335 0.729167 11.9876 0.4375 11.7168C0.166667 11.4251 0.0208333 11.071 0 10.6543V3.56055L6.53125 8.6543C6.98958 8.98763 7.47917 9.1543 8 9.1543ZM0.5 2.68555C0.166667 2.41471 0 2.07096 0 1.6543C0.0208333 1.23763 0.166667 0.883464 0.4375 0.591797C0.729167 0.320964 1.08333 0.17513 1.5 0.154297H14.5C14.9167 0.17513 15.2708 0.320964 15.5625 0.591797C15.8333 0.883464 15.9792 1.23763 16 1.6543C15.9792 2.07096 15.8125 2.41471 15.5 2.68555L8.875 7.8418C8.60417 8.05013 8.3125 8.1543 8 8.1543C7.6875 8.1543 7.39583 8.05013 7.125 7.8418L0.5 2.68555Z"
                        fill="#4E2B59"
                      />
                    </svg>
                  </span>
                  <span>contact@eas-corporation.com</span>
                </a>
              </li>
              <li>
                <a aria-label="" href="javascript:;" className="flex gap-2">
                  <span className="pt-[5px]">
                    <svg
                      width="19"
                      height="17"
                      viewBox="0 0 19 17"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M18 8.1543C17.9792 8.42513 17.875 8.6543 17.6875 8.8418C17.5 9.0293 17.2708 9.13346 17 9.1543H16L16.0312 14.1543C16.0104 14.2376 16 14.321 16 14.4043V14.9043C16 15.2585 15.875 15.5501 15.625 15.7793C15.3958 16.0293 15.1042 16.1543 14.75 16.1543H14.25C14.2292 16.1543 14.2188 16.1543 14.2188 16.1543C14.1979 16.1335 14.1771 16.1335 14.1562 16.1543C14.1146 16.1335 14.0833 16.1335 14.0625 16.1543C14.0417 16.1543 14.0312 16.1543 14.0312 16.1543H12.25C11.8958 16.1543 11.6042 16.0293 11.375 15.7793C11.125 15.5501 11 15.2585 11 14.9043V12.1543C11 11.8626 10.9062 11.623 10.7188 11.4355C10.5312 11.248 10.2917 11.1543 10 11.1543H8C7.70833 11.1543 7.46875 11.248 7.28125 11.4355C7.09375 11.623 7 11.8626 7 12.1543V14.9043C7 15.2585 6.875 15.5501 6.625 15.7793C6.39583 16.0293 6.10417 16.1543 5.75 16.1543H4C3.95833 16.1543 3.91667 16.1543 3.875 16.1543C3.83333 16.1543 3.79167 16.1543 3.75 16.1543H3.25C2.89583 16.1543 2.60417 16.0293 2.375 15.7793C2.125 15.5501 2 15.2585 2 14.9043V11.4043C2 11.3835 2 11.3522 2 11.3105V9.1543H1C0.708333 9.13346 0.46875 9.0293 0.28125 8.8418C0.09375 8.6543 0 8.42513 0 8.1543C0 7.86263 0.104167 7.61263 0.3125 7.4043L8.3125 0.404297C8.54167 0.216797 8.77083 0.133464 9 0.154297C9.25 0.154297 9.47917 0.227214 9.6875 0.373047L17.6562 7.4043C17.9062 7.61263 18.0208 7.86263 18 8.1543Z"
                        fill="#4E2B59"
                      />
                    </svg>
                  </span>
                  <span>
                    Enterprise Analytics Software GmbH <br />
                    K√∂nigstrasse 27 <br />
                    70173 Stuttgart / Germany
                  </span>
                </a>
              </li>
            </ul>
          </div>
          <div className="w-full xl:max-w-[578px]">
            <form onSubmit={handleSubmit} method="POST" className="flex flex-col gap-2 xl:gap-5" >
              <div className="flex flex-col sm:flex-row gap-2 xl:gap-5">
                <input
                  type="text"
                  name="name"
                  id="name"
                  value={formData.name}
                  onChange={handleChange}
                  placeholder="Ihr Name*"
                  className="bg-white bg-opacity-30 placeholder:text-white text-white py-3 px-8 rounded-lg w-full"
                  autoComplete="off"
                  required
                />
                <input
                  type="email"
                  name="email"
                  id="email"
                  value={formData.email}
                  onChange={handleChange}
                  placeholder="Ihr E-mail*"
                  className="bg-white bg-opacity-30 placeholder:text-white text-white py-3 px-8 rounded-lg w-full"
                  autoComplete="off"
                  required
                />
              </div>
              <input
                type="number"
                name="phone_number"
                id="phone_number"
                placeholder="Ihre Telefonnummer*"
                value={formData.phone_number}
                onChange={handleChange}
                className="bg-white bg-opacity-30 placeholder:text-white text-white py-3 px-8 rounded-lg"
                required
              />
              <input
                type="number"
                name="new_contact"
                id="new_contact"
                value={formData.new_contact}
                onChange={handleChange}
                placeholder="neuer Kontakt*"
                className="bg-white bg-opacity-30 placeholder:text-white text-white py-3 px-8 rounded-lg"
                required
              />
              <textarea
                name="message"
                id="message"
                placeholder="Ihre Nachricht*"
                value={formData.message}
                onChange={handleChange}
                rows="3"
                className="bg-white bg-opacity-30 placeholder:text-white text-white py-3 px-8 rounded-lg"
              />
              <p>
                Informationen zum Datenschutz bzgl. Ihrer Anfrage finden Sie
                hier : <b>Datenschutzerkl√§rung</b>
              </p>
              <button
                type="submit"
                className="bg-primary text-white py-3 px-8 flex items-center gap-3 w-fit uppercase shadow-[0_4px_10px_rgba(0,0,0,0.25)]"
              >
              {
                loading ?
                <span>Senden...</span>  :
                <span>Senden</span>
              }
                
                <svg
                  width="24"
                  height="25"
                  viewBox="0 0 24 25"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fillRule="evenodd"
                    clipPath="evenodd"
                    d="M19.424 7.86254C19.22 7.95127 19.125 8.10732 19.125 8.35341V8.56262L20.6583 10.1005L22.1915 11.6383L11.2609 11.6504L0.330265 11.6624L0.210593 11.7821C-0.0255161 12.0182 0.0142339 12.407 0.291828 12.5762C0.444078 12.6691 0.533937 12.6699 11.3194 12.67L22.1934 12.6702L20.6593 14.207L19.125 15.7438V15.9585C19.125 16.3458 19.4593 16.5937 19.789 16.4508C19.8815 16.4107 20.764 15.5619 21.9492 14.373L23.9532 12.363V12.1546V11.9461L21.9492 9.9361C20.1838 8.1653 19.7716 7.78876 19.607 7.79701C19.5868 7.79804 19.5045 7.82752 19.424 7.86254Z"
                    fill="currentColor"
                  />
                </svg>
              </button>
            </form>
          </div>
        </div>
      </div>
    </section>
  )
}

export default Kontakt